<!doctype html>
<html lang="">	
<head>
	<meta charset="utf-8"/>
	<title>Metro Transit CLI Bus Locations - twopercent</title>	
	<meta name="author" content="Chris Moser">
	

	<meta name="description" content="busloc.py displays a geojson.io web page with locations of vehicles on a specified route">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
		

</head>
	
<body>

    <div class="container">
	  
	  <header role="banner">
	    <div class="feeds">
	    </div>
	      <nav class="pages">
			  <a href="/pages/resume.html">Resume</a>
	      </nav>
		<a href="" class="title">twopercent</a>
      </header>
	
	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">
			
		<h1>Metro Transit CLI Bus Locations</h1>
		
<div class="metadata">
  <time datetime="2015-10-20T16:37:00-05:00" pubdate>Tue 20 October 2015</time>
    <address class="vcard author">
      by <a class="url fn" href="/author/chris-moser.html">Chris Moser</a>
    </address>
  in <a href="/category/blog.html">blog</a>
<p class="tags">tagged <a href="/tag/python.html">python</a>, <a href="/tag/dev.html">dev</a>, <a href="/tag/maps.html">maps</a></p></div>		
		<p>Continuing with the mtcli package, I added busloc.py which will display the locations of vehicles on a specified route.
There are two main functions, getLocations(busNum) and openMap(busLocations).</p>
<p>First the user is prompted for a bus number.
A call is made to the metro transit API to return an array of arrays of information about all the vehicles currently active on that route.
Two of the attributes of interest are the latitude and longitude.
I build a GeoJSON MultiPoint array of the GPS coordinates of each vehicle.
More info on the GeoJSON format can be foud <a class="reference external" href="http://geojson.org">here</a>.</p>
<p>I was recommended to a great resource in <a class="reference external" href="http://geojson.io">GeoJSON.io</a> to display the locations on map in a browser.
You can upload data in many forms to geojson.io or point it to an online datasets.
Since I wanted a fluid experience with my application I chose to encode the coordinate data into the URL used to request the site.
I used the urllib.parse.quote module to replace special characters in the coordinate data using %xx escape format.
Finally webbrowser.open_new_tab(url) is called to open geojson.org with the location data.</p>
<p>Metro Transit allows you to specity &quot;0&quot; as a route number and it will return data on all vehicles currently in operation.</p>
<p>I am thinking about ways to combine mtcli.py and busloc.py into a single application.</p>
<p>All Metro Transit vehicles in operation at 16:00 on a Tuesday</p>
<img alt="bus location image" src="metro_transit.png" />
	

	</article>

    <p>
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</p>


		  </div>	
		  
		  <div class="sidebar">

	        <nav>
	          <h2>Categories</h2>
	          <ul>
	              <li class="active"><a href="/category/blog.html">blog</a></li>
	          </ul>
	        </nav>

	          <aside>
	          <h2>Social</h2>
			    <ul class="social">
				  <li><a href="http://github.com/twopercent">github</a><i></i></li>
				  <li><a href="http://twitter.com/dancingwstar">twitter</a><i></i></li>
				  <li><a href="https://www.linkedin.com/pub/chris-moser/43/738/932">linkedin</a><i></i></li>
			    </ul>
			  </aside>

	          <aside>
	            <h2>Blogroll</h2>
	            <ul>
	                <li><a href="http://getpelican.com/">Pelian</a></li>
	                <li><a href="http://python.org/">Python.org</a></li>
	                <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
	                <li><a href="http://neic.coop">NEIC</a></li>
	            </ul>
	          </aside>

		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  Â© 2013 Chris Moser - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey">pelican-simplegrey</a>.
    	</p>

	  </footer>	

	</div>
	

</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>twopercent - maps</title>
        <link rel="stylesheet" href="https://twopercent.github.io/theme/css/main.css" />
        <link href="https://twopercent.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="twopercent Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://twopercent.github.io/">twopercent </a></h1>
                <nav><ul>
                    <li><a href="https://twopercent.github.io/pages/resume.html">Resume</a></li>
                    <li><a href="https://twopercent.github.io/category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://twopercent.github.io/metro-transit-cli-bus-locations.html">Metro Transit CLI Bus Locations</a></h1>
<footer class="post-info">
        <abbr class="published" title="2015-10-20T16:37:00-05:00">
                Published: Tue 20 October 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://twopercent.github.io/author/chris-moser.html">Chris Moser</a>
        </address>
<p>In <a href="https://twopercent.github.io/category/blog.html">blog</a>.</p>
<p>tags: <a href="https://twopercent.github.io/tag/python.html">python</a> <a href="https://twopercent.github.io/tag/dev.html">dev</a> <a href="https://twopercent.github.io/tag/maps.html">maps</a> </p>
</footer><!-- /.post-info --><p>Continuing with the mtcli package, I added busloc.py which will display the locations of vehicles on a specified route.
There are two main functions, getLocations(busNum) and openMap(busLocations).</p>
<p>First the user is prompted for a bus number.
A call is made to the metro transit API to return an array of arrays of information about all the vehicles currently active on that route.
Two of the attributes of interest are the latitude and longitude.
I build a GeoJSON MultiPoint array of the GPS coordinates of each vehicle.
More info on the GeoJSON format can be foud <a class="reference external" href="http://geojson.org">here</a>.</p>
<p>I was recommended to a great resource in <a class="reference external" href="http://geojson.io">GeoJSON.io</a> to display the locations on map in a browser.
You can upload data in many forms to geojson.io or point it to an online datasets.
Since I wanted a fluid experience with my application I chose to encode the coordinate data into the URL used to request the site.
I used the urllib.parse.quote module to replace special characters in the coordinate data using %xx escape format.
Finally webbrowser.open_new_tab(url) is called to open geojson.org with the location data.</p>
<p>Metro Transit allows you to specity &quot;0&quot; as a route number and it will return data on all vehicles currently in operation.</p>
<p>I am thinking about ways to combine mtcli.py and busloc.py into a single application.</p>
<p>All Metro Transit vehicles in operation at 16:00 on a Tuesday</p>
<img alt="bus location image" src="metro_transit.png" />
                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="http://neic.coop">NEIC</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://twopercent.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="http://github.com/twopercent">github</a></li>
                            <li><a href="http://twitter.com/dancingwstar">twitter</a></li>
                            <li><a href="https://www.linkedin.com/pub/chris-moser/43/738/932">linkedin</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>